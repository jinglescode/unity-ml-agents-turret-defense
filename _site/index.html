<!doctype html>
<head>

  <!-- Meta -->
  <meta charset="utf-8">

  <title>Reinforcement Learning on Unity Machine Learning Agents Toolkit | Khok Hong Jing</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- RSS -->
  <!-- <link rel="alternate" type="application/rss+xml" title="Reinforcement Learning on Unity Machine Learning Agents Toolkit - A reinforcement learning agent playing as the turret, where its goal is to allow ten friendly units to enter the base, and loses if an enemy unit has entered the base or if two friendly units were shot." href="http://localhost:4000/feed.xml">
  <link rel="alternate" type="application/atom+xml" title="Reinforcement Learning on Unity Machine Learning Agents Toolkit - A reinforcement learning agent playing as the turret, where its goal is to allow ten friendly units to enter the base, and loses if an enemy unit has entered the base or if two friendly units were shot." href="http://localhost:4000/atom.xml"> -->

  <!-- Favicons -->
  <!-- <link rel="icon" href="http://localhost:4000/img/favicon.png"> -->
  <link rel="icon" type="image/png" href="https://jinglescode.github.io/assets/img/favicon.png" />

  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700|Merriweather:400,300,300italic,400italic,700' rel='stylesheet' type='text/css'/>

  <script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js"></script>

  <meta name="generator" content="Jekyll v3.9.0" />
  <meta property="og:title" content="Reinforcement Learning on Unity Machine Learning Agents Toolkit" />
  <meta name="author" content="Khok Hong Jing" />
  <meta property="og:locale" content="en_US" />
  <meta name="description" content="A reinforcement learning agent playing as the turret, where its goal is to allow ten friendly units to enter the base, and loses if an enemy unit has entered the base or if two friendly units were shot." />
  <meta property="og:description" content="A reinforcement learning agent playing as the turret, where its goal is to allow ten friendly units to enter the base, and loses if an enemy unit has entered the base or if two friendly units were shot." />
  <link rel="canonical" href="http://localhost:4000" />
  <meta property="og:url" content="http://localhost:4000" />
  <meta property="og:site_name" content="Khok Hong Jing" />

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49548145-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-49548145-2');
  </script>

  </head>

  <!-- Styles -->
  <link rel="stylesheet" href="/unity-ml-agents-turret-defense/public/css/animate.min.css"/>
  <link rel="stylesheet" href="/unity-ml-agents-turret-defense/public/css/style.css"/>

</head>
<body class="">

<div class="main container" id="top">


<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="hero-container">
        <div class="hero-content">
          <h1 class="text-center">Reinforcement Learning on Unity Machine Learning Agents Toolkit</h1>

          <p class="text-center">
            Hong Jing Khok
          </p>

          <div class="hero-buttons">
            <a href="https://github.com/jinglescode/unity-ml-agents-turret-defense/blob/master/report.pdf"
              ><button class="btn btn-default btn-lg">
                <i class="far fa-file-alt fa-lg" style="margin-right: 10px"></i
                >Report
              </button></a
            >

            <a href="https://github.com/jinglescode/unity-ml-agents-turret-defense/tree/ml-agents"
              ><button class="btn btn-default btn-lg">
                <i class="fab fa-github fa-lg" style="margin-right: 10px"></i
                >Codes
              </button></a
            >

            <!-- <a href=""
              ><button class="btn btn-default btn-lg">
                <i class="fab fa-medium fa-lg" style="margin-right: 10px"></i
                >Medium
              </button></a
            > -->

          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <main>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>This is a report for an assignment for the course, Artificial Intelligence in Game Design (DM6127). This report will describe the mechanics of the game and its design and present the thought process of designing a reinforcement learning agent capable of playing this game. We explore scenarios on various difficulties and compare our agent’s performance. Iteratively, we developed and evaluated each hypothesis; and recorded its results.</p>

<p>Our goal is to build a turret game where the player can shoot enemy units while allowing friendly units to enter. We will train a reinforcement learning agent to play as the turret, where its goal is to allow ten friendly units to enter the base, and loses if an enemy unit has entered the base or if two friendly units were shot.</p>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Unity Platform - <a href="https://unity.com/">Download</a></li>
  <li>Unity Version: 2018.4.26f1</li>
  <li><a href="https://github.com/Unity-Technologies/ml-agents">Unity ML-Agents Toolkit</a></li>
</ul>

<h2 id="codes">Codes</h2>

<p>The source code can be found in the <a href="https://github.com/jinglescode/unity-ml-agents-turret-defense/tree/ml-agents">ml-agents branch</a>.</p>

<h2 id="gameplay">Gameplay</h2>

<h4 id="easy-scenario">Easy scenario</h4>

<p>This scenario is where there are fixed spawn points for units, where the friendly and enemy spawn points are swapped at a random interval. Here we test the effects of delayed gratification where the agents are required to save ten friendly units from getting the reward. As this scenario is easy enough, the performance is astounding, with an almost 99% win rate. Out of 1000 episodes, there are five losses, all of which only happened in the first episode.</p>

<p>This scenario is particularly important as it proves that the agent was able to distinguish between friendly and enemy units and was able to prioritize shooting nearer enemy units first. With these results, we are ready to challenge our agent to a slightly more difficult scenario.</p>

<p>Watch a snippet of the gameplay, might take awhile to load:</p>

<p><img src="public/img/easy-scenario.gif" alt="easy" /></p>

<h4 id="normal-scenario">Normal scenario</h4>

<p>In this scenario, units are spawned randomly at a specified distance at a specified time interval. Instead of having the same movement speed for both friendly and enemy, we made the enemy faster. This gives a good challenge for our agent.</p>

<p>In most cases, where the agent failed, the enemy is behind a friendly unit, and as the enemy moves faster than the friendly unit, this would result in certain failure. We also notice that the rotation speed has limited the agent’s performance, as turning towards an incoming unit from behind, especially enemy units that sneak behind a friendly unit; this would result in a lost episode. Also, in many cases, enemy units are too close to a friendly unit. As a result, shooting friendly units caused the agent to lose the match. One possible way to improve is to fine-tune the size of ray perception and the ray cast.</p>

<p>Watch a snippet of the gameplay, might take awhile to load:</p>

<p><img src="public/img/normal-scenario.gif" alt="norm" /></p>

<h4 id="advanced-scenario">Advanced scenario</h4>

<p>As in our design, enemy units are already moving faster than friendly units, with advanced enemy units, their movement speed is much more unpredictable. They could move forward faster and move left or right, hiding behind friendly units. This gives a great challenge for our agent; the winning rate is approximate 55\%. Like the normal scenario, there are many cases when the enemy units are hiding behind friendly units; this caused the enemy units to be too near before the agent had the chance to shoot it. At times, the enemy units were moving too close to friendly units. As a result, friendly fire happened, and the match was lost.</p>

<p>Watch a snippet of the gameplay, might take awhile to load:</p>

<p><img src="public/img/advanced-scenario.gif" alt="hard" /></p>

<h4 id="advanced-scenario-with-power-ups">Advanced scenario with power-ups</h4>

<p>In this scenario, we are interested in seeing the effects on power-ups to see if it improves the agent’s performance. The agent gained three times on rotation speed boost and no cooldown on firing by shooting on the power-up. Unfortunately, the performance did not improve. We hypothesize that the agent did not manage to associate shooting the power-ups with the rewards gain as we did not assign any rewards for hitting the power-ups. Therefore, we attempted to assign a small reward for shooting the power-ups. Unfortunately, we did not see any improvements as well.</p>

<p>Watch a snippet of the gameplay, might take awhile to load:</p>

<p><img src="public/img/advanced-scenario-power-ups.gif" alt="hard-powerup" /></p>

                </div>
            </div>
        </div>
    </main>


    <footer class="site-footer">
      <div class="container">
        <div class="row">

          <div class="col-xs-12 col-md-12 col-md-offset-1">
            <p class="text-muted text-left ">
              <a href="https://jinglescode.github.io/">About the Author</a> | <a href="https://github.com/jinglescode/unity-ml-agents-turret-defense">Hosted on GitHub</a>
            </p>
          </div>

        </div>
      </div>
    </footer>

  </div><!-- .main.container -->

  </body>
</html>
